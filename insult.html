<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dynamic Roast Machine ü§ñüî•</title>
  <meta name="description" content="Dynamic Roast / Meme insult generator ‚Äî —Å–≥–ª–æ–±—è–≤–∞ —Ä–µ–ø–ª–∏–∫–∏ –æ—Ç —á–∞—Å—Ç–∏, –¥–æ–±–∞–≤—è custom –ø–∞—Ä—á–µ—Ç–∞, TTS, –∫–æ–ø–∏—Ä–∞–Ω–µ, –∏—Å—Ç–æ—Ä–∏—è –∏ –æ—â–µ." />
  <style>
    :root{
      --bg:#0b1020;--card:#111428;--muted:#9fb0ff;--text:#e8eefc;--accent:#7c9aff;--accent2:#00d9a6;--danger:#ff5c7a
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,'Helvetica Neue',Arial}
    body{background:radial-gradient(800px 400px at 10% -10%, #112249, transparent), radial-gradient(700px 350px at 120% 10%, #152a44, transparent),var(--bg);color:var(--text);display:flex;align-items:center;justify-content:center;padding:28px}
    .wrap{width:min(1100px,96%);background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01));border-radius:16px;padding:18px;border:1px solid rgba(255,255,255,.06);box-shadow:0 10px 30px rgba(0,0,0,.45)}
    header{display:flex;justify-content:space-between;align-items:center;gap:12px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:52px;height:52px;border-radius:12px;display:grid;place-items:center;font-weight:900;background:conic-gradient(from 180deg,#7c9aff,#00d9a6);color:#081022}
    h1{margin:0;font-size:20px}
    p.lead{margin:0;color:var(--muted);font-size:13px}
    main{display:grid;grid-template-columns:1fr 420px;gap:16px;margin-top:16px}
    @media (max-width:980px){main{grid-template-columns:1fr}}
    .card{background:rgba(255,255,255,.03);padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,.04)}
    .output{min-height:130px;padding:14px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01));font-size:18px;display:flex;align-items:center}
    .controls{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    button.btn{padding:8px 12px;border-radius:10px;border:1px solid rgba(255,255,255,.06);cursor:pointer;background:transparent;color:var(--text)}
    button.primary{background:linear-gradient(180deg,var(--accent),#5e7cff);border:none;color:#081022}
    button.danger{background:linear-gradient(180deg,var(--danger),#ff3b6f);border:none;color:#081022}
    label.option{display:flex;align-items:center;gap:8px}
    .col{display:flex;flex-direction:column;gap:8px}
    .small{font-size:13px;color:var(--muted)}
    .history{max-height:360px;overflow:auto;display:flex;flex-direction:column;gap:8px}
    .history .item{padding:8px;border-radius:8px;background:rgba(255,255,255,.02);border:1px solid rgba(255,255,255,.03);display:flex;justify-content:space-between;gap:8px}
    .muted{color:var(--muted)}
    input[type=text], textarea, select{padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,.06);background:rgba(255,255,255,.02);color:var(--text);width:100%}
    textarea{min-height:70px}
    .tags{display:flex;gap:6px;flex-wrap:wrap}
    .tag{padding:6px 8px;border-radius:999px;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.04);font-size:13px}
  </style>
</head>
<body>
  <div class="wrap" role="application" aria-label="Dynamic Roast Machine">
    <header>
      <div class="brand">
        <div class="logo">üî•</div>
        <div>
          <h1>Dynamic Roast Machine</h1>
          <p class="lead">–°–≥–ª–æ–±—è–≤–∞ memes + insults –æ—Ç —á–∞—Å—Ç–∏. –î–æ–±–∞–≤—è–π, —Å—ä—Ö—Ä–∞–Ω—è–≤–∞–π –∏ —Å–ø–æ–¥–µ–ª—è–π. PG-13 vibes üòà</p>
        </div>
      </div>
      <div class="col">
        <div class="small">Made for: <strong>–ë—Ä–∞—Ç–ª–µ</strong> ‚Äî –º–Ω–æ–≥–æ —à–µ–≥–∏, –º–∞–ª–∫–æ –æ–±–∏–¥–∫–∏ ü§ù</div>
      </div>
    </header>

    <main>
      <section class="card">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <div style="font-weight:700;font-size:15px">–†–µ–∑—É–ª—Ç–∞—Ç</div>
            <div class="small muted">–ù–∞—Ç–∏—Å–Ω–∏ ‚Äû–ì–µ–Ω–µ—Ä–∏—Ä–∞–π Roast‚Äú –∑–∞ –Ω–æ–≤–∞ –¥–∏–Ω–∞–º–∏—á–Ω–∞ —Ä–µ–ø–ª–∏–∫–∞</div>
          </div>
          <div class="tags" id="active-cats"></div>
        </div>

        <div id="output" class="output" aria-live="polite"></div>

        <div class="controls">
          <button class="btn primary" id="btn-gen">üé≤ –ì–µ–Ω–µ—Ä–∏—Ä–∞–π Roast</button>
          <button class="btn" id="btn-presets">üì¶ –û—Ç –≥–æ—Ç–æ–≤–∏ —Ñ—Ä–∞–∑–∏</button>
          <button class="btn" id="btn-copy">üìã –ö–æ–ø–∏—Ä–∞–π</button>
          <button class="btn" id="btn-tts">üîä –ò–∑–≥–æ–≤–æ—Ä–∏</button>
          <button class="btn danger" id="btn-clearHistory">üßπ –ò–∑—á–∏—Å—Ç–∏ –∏—Å—Ç–æ—Ä–∏—è</button>
        </div>

        <div style="display:flex;gap:8px;margin-top:10px;flex-wrap:wrap;align-items:center">
          <label class="option"><input type="checkbox" id="auto-mode"> Auto (2s)</label>
          <label class="option"><input type="checkbox" id="safe-mode" checked> Safe Mode (PG-13)</label>
          <label style="margin-left:8px">–ò–º–µ –∑–∞ –∑–∞–º–µ—Å—Ç–≤–∞–Ω–µ: <input id="nameInput" type="text" placeholder="–Ω–∞–ø—Ä. –ü–µ—à–æ, –ú–æ–Ω–∏, superUser" style="width:180px"/></label>
        </div>

        <hr style="border:none;border-top:1px solid rgba(255,255,255,.04);margin:12px 0" />

        <div class="small muted">–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–∏ —á–∞—Å—Ç–∏ (–º–æ–≥–∞—Ç –¥–∞ —Å–µ –¥–æ–±–∞–≤—è—Ç –∏ –≤–µ—á–µ —Å–µ —Å—ä—Ö—Ä–∞–Ω—è–≤–∞—Ç –≤ localStorage)</div>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:8px">
          <div>
            <label class="small">–ù–∞—á–∞–ª–æ (start)</label>
            <input id="add-start" type="text" placeholder="–Ω–∞–ø—Ä. '–ë—Ä–∞—Ç–ª–µ, —Ç–∏ —Å–∏ –∫–∞—Ç–æ'" />
          </div>
          <div>
            <label class="small">–°—Ä–µ–¥–∞ (middle)</label>
            <input id="add-middle" type="text" placeholder="–Ω–∞–ø—Ä. '—Å—Ç–∞—Ä —Ç–æ—Å—Ç–µ—Ä'" />
          </div>
          <div style="grid-column:1/3">
            <label class="small">–ö—Ä–∞–π (end)</label>
            <input id="add-end" type="text" placeholder="–Ω–∞–ø—Ä. '‚Äì –±–∞–≤–µ–Ω –∏ –±–µ–∑–ø–æ–ª–µ–∑–µ–Ω.'" />
          </div>
        </div>
        <div style="margin-top:8px;display:flex;gap:8px">
          <select id="add-cat">
            <option value="memes">Memes</option>
            <option value="dev">Dev</option>
            <option value="animals">Animals</option>
            <option value="cars">Cars</option>
            <option value="famous">Famous</option>
            <option value="brutal">Brutal üòà</option>
          </select>
          <button class="btn" id="btn-addPart">‚ûï –î–æ–±–∞–≤–∏ –ø–∞—Ä—á–µ</button>
          <button class="btn" id="btn-resetParts">‚ôªÔ∏è Reset parts</button>
        </div>
      </section>

      <aside class="card">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div style="font-weight:700">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ & –ö–∞—Ç–µ–≥–æ—Ä–∏–∏</div>
          <div class="small muted">–ò–∑–±–µ—Ä–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –∫–æ–∏—Ç–æ –¥–∞ —Å–µ –ø–æ–ª–∑–≤–∞—Ç</div>
        </div>

        <div style="margin-top:8px;display:grid;gap:8px">
          <label class="option"><input type="checkbox" class="cat" value="memes" checked> Memes (general)</label>
          <label class="option"><input type="checkbox" class="cat" value="dev" checked> Dev jokes</label>
          <label class="option"><input type="checkbox" class="cat" value="animals"> Animals</label>
          <label class="option"><input type="checkbox" class="cat" value="cars"> Cars</label>
          <label class="option"><input type="checkbox" class="cat" value="famous"> Famous people</label>
          <label class="option"><input type="checkbox" class="cat" value="brutal"> Brutal üòà</label>
        </div>

        <hr style="border:none;border-top:1px solid rgba(255,255,255,.04);margin:8px 0" />

        <div class="col">
          <div style="display:flex;gap:8px;align-items:center">
            <div style="font-weight:700">–ò—Å—Ç–æ—Ä–∏—è</div>
            <div class="small muted">(LocalStorage)</div>
          </div>
          <div id="history" class="history" aria-live="polite"></div>
        </div>
      </aside>
    </main>
  </div>

  <script>
    // ----------------- Data -----------------
    const defaultStarters = ["–ë—Ä–∞—Ç–ª–µ","–ö–æ–ø–µ–ª–µ","–®–º–∞—Ç–∫–∞"];
    const baseParts = {
      memes: {
        start:["–ë—Ä–∞—Ç–ª–µ, —Ç–∏ —Å–∏ –∫–∞—Ç–æ","–ú–æ–∑—ä–∫—ä—Ç —Ç–∏ –µ –∫–∞—Ç–æ","–£—Å–º–∏–≤–∫–∞—Ç–∞ —Ç–∏ –µ –∫–∞—Ç–æ","–ü—Ä–∏—Å—ä—Å—Ç–≤–∏–µ—Ç–æ —Ç–∏ –µ –∫–∞—Ç–æ","–î–≤–∏–∂–µ–Ω–∏—è—Ç–∞ —Ç–∏ —Å–∞ –∫–∞—Ç–æ"],
        middle:["Wi‚ÄëFi –Ω–∞ –±–∞–±–∞","—Å—Ç–∞—Ä —Ç–æ—Å—Ç–µ—Ä","Excel —Ç–∞–±–ª–∏—Ü–∞ —Å 200k —Ä–µ–¥–∞","–ø—Ä–∏–Ω—Ç–µ—Ä –±–µ–∑ –º–∞—Å—Ç–∏–ª–æ","Nokia —Å –ø–∞–¥–Ω–∞–ª –±—É—Ç–æ–Ω","–∫–æ–ª–∞ –±–µ–∑ –±–µ–Ω–∑–∏–Ω"],
        end:["‚Äì –±–∞–≤–µ–Ω –∏ –±–µ–∑–ø–æ–ª–µ–∑–µ–Ω.","‚Äì –≥—Ä–µ–µ, –∞–º–∞ –Ω–µ –≤—ä—Ä—à–∏ —Ä–∞–±–æ—Ç–∞.","‚Äì crash-–≤–∞ –≤—Å–µ–∫–∏ –ø—ä—Ç –∫–æ–≥–∞—Ç–æ –Ω—è–∫–æ–π —Ç–µ –ø–æ–≥–ª–µ–¥–Ω–µ.","‚Äì —É–∂ –∂–∏–≤, –∞–º–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –∑–∞—Ü–∏–∫–ª—è.","‚Äì –∏–∑–≥–ª–µ–∂–¥–∞—à —Å—Ç–∞–±–∏–ª–µ–Ω, –∞–º–∞ –≤–∏–Ω–∞–≥–∏ –¥–∞–≤–∞—à –≥—Ä–µ—à–∫–∞."]
      },
      dev: {
        start:["–ë—Ä–∞—Ç–ª–µ, —Ç–∏ —Å–∏ –∫–∞—Ç–æ","–ö–æ–¥—ä—Ç —Ç–∏ –µ –∫–∞—Ç–æ","–ú–µ–Ω—Ç–∞–ª–Ω–æ—Ç–æ —Ç–∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –µ –∫–∞—Ç–æ"],
        middle:["console.log –≤ production","var –≤–º–µ—Å—Ç–æ let","commit —Å 'fix stuff'","merge –±–µ–∑ tests","docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å 0 –ø–∞–º–µ—Ç"],
        end:["‚Äì –Ω–∏–∫–æ–π –Ω–µ –∏—Å–∫–∞ –¥–∞ –≥–æ –≤–∏–∂–¥–∞.","‚Äì —Å—Ç–∞—Ä–æ –∏ –Ω–µ–ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–æ.","‚Äì –ø—Ä–∏—á–∏–Ω–∏ –∑–∞ –±–µ—Å–µ–Ω–µ.","‚Äì –ø—Ä–∏—á–∏–Ω–∏ –∑–∞ StackOverflow search."]
      },
      animals: {
        start:["–¢–∏ —Å–∏ –∫–∞—Ç–æ","–ú–æ–∑—ä–∫—ä—Ç —Ç–∏ –ø—Ä–∏–ª–∏—á–∞ –Ω–∞"],
        middle:["–ª–µ–Ω–∏–≤–µ—Ü –Ω–∞ –∫–∞—Ñ–µ","—â—ä—Ä–∫–µ–ª –Ω–∞ —Ä–æ–ª–∫–æ–≤–∏ –∫—ä–Ω–∫–∏","–∫–æ—Å—Ç–µ–Ω—É—Ä–∫–∞ —Å —Ä–µ–∞–∫—Ç–∏–≤–µ–Ω —Ä–∞–∫–µ—Ç–µ–Ω –¥–≤–∏–≥–∞—Ç–µ–ª"],
        end:["‚Äì –±–∞–≤–µ–Ω, –Ω–æ –¥—Ä–∞–º–∞—Ç–∏—á–µ–Ω.","‚Äì –∏–∑–≥–ª–µ–∂–¥–∞—à –µ–ø–∏—á–Ω–æ, –Ω–æ –Ω–µ –º—ä—Ä–¥–∞—à."]
      },
      cars: {
        start:["–¢–∏ —Å–∏ –∫–∞—Ç–æ","–î—É—Ö—ä—Ç —Ç–∏ –µ –∫–∞—Ç–æ"],
        middle:["–∫–æ–ª–∞ –±–µ–∑ –º–∞—Å–ª–æ","—Ä–µ—Ç—Ä–æ –º–∏–∫—Ä–æ–±—É—Å —Å—ä—Å —Å–≤–µ—Ç–µ—â–∏ –ª–∞–º–ø–∏","—Å–ø–æ—Ä—Ç–µ–Ω –∞–≤—Ç–æ–º–æ–±–∏–ª —Å –ø–ª–æ—Å–∫–∞ –≥—É–º–∞"],
        end:["‚Äì –º–Ω–æ–≥–æ –∑–≤—É–∫, –º–∞–ª–∫–æ –¥–≤–∏–∂–µ–Ω–∏–µ.","‚Äì —Å—Ç–∞—Ä—Ç, –Ω–æ –Ω–∏–∫–æ–≥–∞ –Ω–µ —Å—Ç–∏–≥–∞—à."]
      },
      famous: {
        start:["–¢–∏ —Å–∏ –∫–∞—Ç–æ","–ü–æ–≤–µ–¥–µ–Ω–∏–µ—Ç–æ —Ç–∏ –Ω–∞–ø–æ–º–Ω—è –Ω–∞"],
        middle:["–∏–Ω—Ñ–ª—É–µ–Ω—Å—ä—Ä —Å 2 –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–∏","–ø–æ–ª–∏—Ç–∏–∫, –∫–æ–π—Ç–æ –≥–æ–≤–æ—Ä–∏ –º–Ω–æ–≥–æ –∏ –ø—Ä–∞–≤–∏ –º–∞–ª–∫–æ","–∑–Ω–∞–º–µ–Ω–∏—Ç–æ—Å—Ç, –∫–æ—è—Ç–æ –∑–∞–±—Ä–∞–≤–∏ —Ç–µ–∫—Å—Ç–∞"],
        end:["‚Äì –ø—ä–ª–µ–Ω —Å–ø–µ–∫—Ç–∞–∫—ä–ª, –ø—Ä–∞–∑–Ω–æ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ.","‚Äì —Ä–µ–∫–ª–∞–º–∞ –±–µ–∑ –ø—Ä–æ–¥—É–∫—Ç."]
      },
      brutal: {
        start:["–¢–∏ —Å–∏ –ø—ä–ª–µ–Ω","–¢–∏ —Å–∏ –∏—Å—Ç–∏–Ω—Å–∫–∏","–° –ø—Ä–∏—Å—ä—Å—Ç–≤–∏–µ—Ç–æ —Å–∏"],
        middle:["–∫–∞—Ç–æ —Ä–∞–∑–≤–∞–ª–µ–Ω –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –Ω–∞ —Å–º—ä—Ä—Ç","–∫–∞—Ç–æ —á–æ–≤–µ—à–∫–∏ –≤–∏—Ä—É—Å","–∫–∞—Ç–æ —Ç–æ—Ç–∞–ª–µ–Ω –∏–¥–∏–æ—Ç","–∫–∞—Ç–æ –ø—Ä–∞–∑–Ω–∞ –¥—É—à–∞ —Å Wi-Fi","–∫–∞—Ç–æ –≥—Ä—ä–º–æ—Ç–µ–≤–∏—Ü–∞ –±–µ–∑ —Å–≤–µ—Ç–∫–∞–≤–∏—Ü–∞"],
        end:["‚Äì –∑–∞–∫–æ–Ω–Ω–æ, –∞–º–∞ –ø–æ—á—Ç–∏.","‚Äì –±—Ä—É—Ç–∞–ª–µ–Ω –∏ –Ω–µ–ø–æ–ø—Ä–∞–≤–∏–º.","‚Äì –±–æ–ª–∏, –Ω–æ –µ –∏—Å—Ç–∏–Ω–∞.","‚Äì –¥–æ—Ä–∏ –º–∞–º–∞ —Ç–∏ —Å–µ —Å—Ä–∞–º—É–≤–∞.","‚Äì —Å–≤–µ—Ç—ä—Ç –∑–∞—Å–ª—É–∂–∞–≤–∞ –ø–æ-–¥–æ–±—Ä–æ –æ—Ç —Ç–æ–≤–∞."]
      }
    };

    const presets = [
      "–ú–æ–∑—ä–∫—ä—Ç —Ç–∏ –µ –∫–∞—Ç–æ —Å—Ç–∞—Ä —Ç–æ—Å—Ç–µ—Ä ‚Äì crash-–≤–∞ –≤—Å–µ–∫–∏ –ø—ä—Ç –∫–æ–≥–∞—Ç–æ –Ω—è–∫–æ–π —Ç–µ –ø–æ–≥–ª–µ–¥–Ω–µ.",
      "–ë—Ä–∞—Ç–ª–µ, —Ç–∏ —Å–∏ –∫–∞—Ç–æ 404 —Å—Ç—Ä–∞–Ω–∏—Ü–∞ ‚Äî –æ–±–µ—â–∞–≤–∞—à –º–Ω–æ–≥–æ, –ø–æ–∫–∞–∑–≤–∞—à –Ω–∏—â–æ.",
      "–¢–∏ —Å–∏ —á–æ–≤–µ—à–∫–∏ placeholder ‚Äî Lorem ipsum —Å –æ–±—É–≤–∫–∏."
    ];

    const userKey = 'drm-user-parts-v2';
    function loadUserParts(){ try{ return JSON.parse(localStorage.getItem(userKey)) || {memes:{start:[],middle:[],end:[]},dev:{start:[],middle:[],end:[]},animals:{start:[],middle:[],end:[]},cars:{start:[],middle:[],end:[]},famous:{start:[],middle:[],end:[]},brutal:{start:[],middle:[],end:[]}} }catch{ return JSON.parse(JSON.stringify(baseParts)) } }
    function saveUserParts(p){ localStorage.setItem(userKey, JSON.stringify(p)); }
    let userParts = loadUserParts();

    const el = {
      output: document.getElementById('output'),
      btnGen: document.getElementById('btn-gen'),
      btnPresets: document.getElementById('btn-presets'),
      btnCopy: document.getElementById('btn-copy'),
      btnTts: document.getElementById('btn-tts'),
      btnClearHistory: document.getElementById('btn-clearHistory'),
      autoMode: document.getElementById('auto-mode'),
      safeMode: document.getElementById('safe-mode'),
      nameInput: document.getElementById('nameInput'),
      cats: Array.from(document.querySelectorAll('.cat')),
      history: document.getElementById('history'),
      addStart: document.getElementById('add-start'),
      addMiddle: document.getElementById('add-middle'),
      addEnd: document.getElementById('add-end'),
      addCat: document.getElementById('add-cat'),
      btnAddPart: document.getElementById('btn-addPart'),
      btnResetParts: document.getElementById('btn-resetParts'),
      activeCats: document.getElementById('active-cats')
    };

    const histKey='drm-history-v2';
    function loadHistory(){ try{ return JSON.parse(localStorage.getItem(histKey)||'[]') }catch{return[]} }
    function saveHistory(h){ localStorage.setItem(histKey, JSON.stringify(h)) }
    let historyArr = loadHistory();

    function updateHistory(){ el.history.innerHTML = ''; historyArr.slice().reverse().forEach((r,i)=>{
      const div=document.createElement('div');div.className='item';div.textContent=r;
      el.history.appendChild(div);
    }) }

    function getActiveCats(){ return el.cats.filter(c=>c.checked).map(c=>c.value) }
    function updateActiveTags(){ el.activeCats.innerHTML = ''; getActiveCats().forEach(c=>{
      const t=document.createElement('div');t.className='tag';t.textContent=c;el.activeCats.appendChild(t)
    }) }

    function random(arr){ return arr[Math.floor(Math.random()*arr.length)] }

    function generateRoast(){
      const starter = el.nameInput.value.trim() || random(defaultStarters);
      const cats = el.safeMode.checked ? getActiveCats().filter(c=>'famous'!==c) : getActiveCats();
      if(!cats.length) return '–ù—è–º–∞ –∞–∫—Ç–∏–≤–Ω–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ üòÖ';
      const cat = random(cats);
      const start = random(baseParts[cat].start.concat(userParts[cat].start));
      const middle = random(baseParts[cat].middle.concat(userParts[cat].middle));
      const end = random(baseParts[cat].end.concat(userParts[cat].end));
      return `${starter} ${start} ${middle} ${end}`.trim();
    }

    function addToHistory(text){ historyArr.push(text); if(historyArr.length>50) historyArr.shift(); saveHistory(historyArr); updateHistory(); }

    el.btnGen.onclick = ()=>{ const r=generateRoast(); el.output.textContent=r; addToHistory(r) }
    el.btnPresets.onclick = ()=>{ const r=random(presets); el.output.textContent=r; addToHistory(r) }
    el.btnCopy.onclick = ()=>{navigator.clipboard.writeText(el.output.textContent).then(()=>alert('Copied!'))}
    el.btnTts.onclick = ()=>{ const u = new SpeechSynthesisUtterance(el.output.textContent); speechSynthesis.speak(u) }
    el.btnClearHistory.onclick = ()=>{ historyArr=[]; saveHistory(historyArr); updateHistory() }

    el.btnAddPart.onclick = ()=>{
      const cat = el.addCat.value;
      if(el.addStart.value) userParts[cat].start.push(el.addStart.value);
      if(el.addMiddle.value) userParts[cat].middle.push(el.addMiddle.value);
      if(el.addEnd.value) userParts[cat].end.push(el.addEnd.value);
      saveUserParts(userParts);
      el.addStart.value=''; el.addMiddle.value=''; el.addEnd.value='';
      alert('Added custom parts!')
    }

    el.btnResetParts.onclick = ()=>{ if(confirm('–°–∏–≥—É—Ä–µ–Ω –ª–∏ —Å–∏? Reset –Ω–∞ –≤—Å–∏—á–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–∞–Ω–∏ —á–∞—Å—Ç–∏!')){ userParts = loadUserParts(); saveUserParts(userParts) } }

    let autoInterval = null;
    el.autoMode.onchange = ()=>{
      if(el.autoMode.checked){
        autoInterval = setInterval(()=>{ el.btnGen.click() },2000)
      }else clearInterval(autoInterval)
    }

    el.cats.forEach(c=>c.onchange = updateActiveTags)
    updateActiveTags()
    updateHistory()
  </script>
</body>
</html>
